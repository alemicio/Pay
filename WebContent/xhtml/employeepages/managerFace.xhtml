<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html lang="it" xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<f:event listener="#{login.checkIfLogged}" type="preRenderView" />

<h:head>
	<title>Manager Dashboard</title>
	<h:outputStylesheet library="css" name="common.css"></h:outputStylesheet>

	<link
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
		crossorigin="anonymous" />
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
		integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
		crossorigin="anonymous"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1" />
</h:head>

<body>
	<div class="container-fluid" id="sfondo">

		<b:navBar brand="Magic ScrewDriver" brandHref="#" fluid="true"
			id="navbar">
			<b:navbarLinks pull="left">
				<b:navLink value="Home" href="#"></b:navLink>
				<b:navLink value="About US" href="#"></b:navLink>
				<b:navLink value="Contacts" href="#"></b:navLink>
			</b:navbarLinks>

			<b:navbarLinks pull="right">
				<b:navLink value="Payments received" href="#"></b:navLink>
				<b:navLink value="Union Services" href="#"></b:navLink>
				<b:navLink value="Manage" href="#"></b:navLink>
			</b:navbarLinks>
		</b:navBar>

		<div class="container">

			<div class="jumbotron" id="jumbotrone">
				<div class="row">

					<div class="col-lg-9">

						<h1>Welcome Manager #{login.retrived_employee.username}</h1>

						<div class="row">
							<div class="col-lg-6" style="text-align: left;">
								<h3>Name: #{login.retrived_employee.name}</h3>
								<h3>E-mail: #{login.retrived_employee.e_mail}</h3>
								<h3>Address: #{login.retrived_employee.postal_address}</h3>
							</div>
							<div class="col-lg-6" style="text-align: left;">
								<h3>Surname: #{login.retrived_employee.surname}</h3>
								<h3>Phone: #{login.retrived_employee.phone_number}</h3>
							</div>
						</div>

						<div class="row">
							<div class="col-lg-3 col-lg-offset-4">
								<b:button value="Change Detail" size="lg" action=""
									look="success" />
							</div>

						</div>

					</div>
					<div class="col-lg-3" style="text-align: center;">
						<h:graphicImage library="images" name="logo_unipv.png"
							class="img-responsive center-block" alt="Responsive image"
							id="bordino" />
						<h:form>
							<b:commandButton size="lg" value="LOGOUT"
								action="#{login.performLogout}" look="danger"></b:commandButton>
						</h:form>
					</div>

				</div>
			</div>
		</div>
	</div>
	<div class="container-fluid" id="sfondo2">
		<div class="container">
			<br></br>
			<div class="jumbotron" id="jumbotrone">
				<div class="row">
					<div class="col-lg-12">

						<div class="col-lg-6" style="text-align: left;">
							<h3>Payment:
								#{paymentmethod.getPaymethodType(employee.retrieved_employee)}</h3>

							<b:modal id="modalpay"
								title="Here you can Modify you Payment method"
								styleClass="modalPseudoClassP">
								<div class="container">
									<div class="row">
										<div class="col-lg-12">
											<h:graphicImage library="images" name="unipv2.png"
												class="img-responsive center-block" alt="Responsive image" />
										</div>
									</div>
									<div class="row">
										<div class="col-lg-12">
											<h3>Actual:#{paymentmethod.getPaymethodType(employee.retrieved_employee)}</h3>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-12">

											<ul class="nav nav-tabs" role="tablist">
												<li role="presentation" class="active"><a href="#home"
													aria-controls="home" role="tab" data-toggle="tab">BANK</a></li>
												<li role="presentation"><a href="#profile"
													aria-controls="profile" role="tab" data-toggle="tab">POSTAL</a></li>
												<li role="presentation"><a href="#messages"
													aria-controls="messages" role="tab" data-toggle="tab">WITHDRAW</a></li>
											</ul>
										</div>
									</div>

									<div class="row" style="margin-top: 2rem;">
										<div class="col-lg-12">
											<!-- Tab panes -->
											<div class="tab-content">
												<div role="tabpanel" class="tab-pane active" id="home">

													<!--  This is the form in which we will insert the new bank paymethod data -->
													<h:form>
														<b:inputText fieldSize="lg" value="#{paymentmethod.IBAN}">
															<f:facet name="prepend">
																<h:outputText value="IBAN" />
															</f:facet>
														</b:inputText>

														<b:inputText fieldSize="lg"
															value="#{paymentmethod.filial}">
															<f:facet name="prepend">
																<h:outputText value="filial" />
															</f:facet>
														</b:inputText>

														<b:button value="close" size="lg" dismiss="modal"
															onclick="return false;" />

														<b:commandButton value="OK"
															action="#{paymentmethod.setBankPaymethod(employee.retrieved_employee)}"></b:commandButton>
													</h:form>
													<!-- ===================================================================== -->

												</div>
												<div role="tabpanel" class="tab-pane" id="profile">

													<!--  This is the form in which we will insert the new postal paymethod data -->
													<h:form>
														<b:inputText fieldSize="lg"
															value="#{paymentmethod.residential_address}">
															<f:facet name="prepend">
																<h:outputText value="Residential Address" />
															</f:facet>
														</b:inputText>

														<b:button value="close" size="lg" dismiss="modal"
															onclick="return false;" />

														<b:commandButton value="OK"
															action="#{paymentmethod.setPostalPaymethod(employee.retrieved_employee)}"></b:commandButton>
													</h:form>
													<!-- ===================================================================== -->

												</div>
												<div role="tabpanel" class="tab-pane" id="messages">

													<!--  This is the form in which we will insert the new withdraw paymethod data -->
													<h:form>
														<b:inputText fieldSize="lg"
															value="#{paymentmethod.headquarter}">
															<f:facet name="prepend">
																<h:outputText value="Headquarter" />
															</f:facet>
														</b:inputText>

														<b:button value="close" size="lg" dismiss="modal"
															onclick="return false;" />

														<b:commandButton value="OK"
															action="#{paymentmethod.setWithDrawPaymethod(employee.retrieved_employee)}"></b:commandButton>
													</h:form>
													<!-- ===================================================================== -->

												</div>
											</div>
										</div>
									</div>
								</div>

							</b:modal>

							<b:button value="Change Paymethod" look="info"
								onclick="$('.modalPseudoClassP').modal();return false;"
								size="lg" />
						</div>
						<div class="col-lg-6" style="text-align: left;">
							<h3>Union:#{union.getUnion(employee.retrieved_employee)}</h3>

							<b:modal id="modalunion" title="Here you can Modify your Union"
								styleClass="modalPseudoClassU">
								<h:form id="unionset">

									<div class="row">
										<div class="col-lg-12">
											<h:graphicImage library="images" name="unipv2.png"
												class="img-responsive center-block" alt="Responsive image" />
										</div>
									</div>
									<div class="row">
										<div class="col-lg-12"></div>
									</div>

									<div class="row" style="margin-top: 2rem;">
										<div class="col-lg-12">

											<b:selectOneMenu value="#{union.union_name}" required="true"
												fieldSize="lg" label="Select a Union to belong">
												<f:facet name="prepend">
													<h:outputText value="@union" />
												</f:facet>

												<f:selectItems value="#{union.associated_unions}" />

											</b:selectOneMenu>
											<b:inputText value="#{union.union_name}" disabled="true"></b:inputText>
										</div>
									</div>

									<div class="row" style="margin-top: 2rem;">
										<div class="col-lg-12">
											<b:commandButton value="Ok" size="lg" look="success"
												dismiss="modal"
												action="#{union.setUnion(employee.retrieved_employee)}" />
										</div>
									</div>

								</h:form>
							</b:modal>

							<b:button value="Change Union" look="info"
								onclick="$('.modalPseudoClassU').modal();return false;"
								size="lg" />
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="container-fluid" id="sfondo">
		<div class="container">
			<br></br>
			<div class="jumbotron" id="jumbotrone">
				<div class="row">
					<div class="col-lg-12">

						<!-- ===================================== -->
						<!-- === Union services selection form === -->
						<!-- ===================================== -->
						<h:form>
							<p:growl id="growl" sticky="true" showDetail="true" life="3000" />
							<!-- This is the services select menu -->
							<b:selectMultiMenu value="#{union.services_selected}"
								required="true" fieldSize="lg"
								label="Select services offered by this union">
								<f:facet name="prepend">
									<h:outputText value="@service" />
								</f:facet>
								<f:selectItems value="#{union.service_names}" />
							</b:selectMultiMenu>

							<!-- This button allows to perform an ajax call to
							     union.updateSelectedUnionServiceAssociations method.
							     It updates data-table which contains service's name
							     and price -->
							<p:commandButton value="Prepare Order" id="ajax-prepare-order"
								update="data-table"
								actionListener="#{union.updateSelectedUnionServiceAssociations}"
								styleClass="ui-priority-primary" />

							<!-- This is the table in which we will show the services the user has selected -->
							<br> </br>
							<h:dataTable id="data-table" border="1"
								value="#{union.selected_union_service_associations}" var="susa">
								<h:column>
									<!-- column header -->
									<f:facet name="header">Name</f:facet>
									<!-- row record -->
				    				#{susa.union_service.name}
				    			</h:column>

								<h:column>
									<f:facet name="header">Price</f:facet>
				    				#{susa.price}
				    			</h:column>
							</h:dataTable>
							<br></br>
							<p:commandButton value="Confirm Order" id="ajax-send-order"
								update="growl"
								action="#{union.confirmOrder(employee.retrieved_employee)}"
								styleClass="ui-priority-primary" />
						</h:form>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="container-fluid" id="sfondo2">
		<div class="container">
			<br/>
		
			<h:form id="salaried_form_list">
				<p:growl id="salaried_list_msgs" showDetail="true" />

				<p:dataTable id="salariedEmployeeList" var="SalariedEmployee"
					value="#{manager.s_employees}" editable="true"
					style="margin-bottom:20px">
					<f:facet name="header">
						SALARIED EMPLOYEES
						<h:commandLink action="#{order.deleteAction(o)}"
							style="float:right;">
							<i class="glyphicon glyphicon-plus"></i>
						</h:commandLink>
					</f:facet>

					<p:ajax event="rowEdit" listener="#{manager.onSalariedRowEdit}"
						update=":salaried_form_list:salaried_list_msgs" />
					<p:ajax event="rowEditCancel"
						update=":salaried_form_list:salaried_list_msgs, :salaried_form_list:salariedEmployeeList"
						listener="#{manager.onSalariedRowCancel}"
						oncomplete="javascript:location.reload(true)" />

					<p:column headerText="Name">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{SalariedEmployee.name}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true" id="modelInput"
									value="#{SalariedEmployee.name}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Surname">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{SalariedEmployee.surname}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true" value="#{SalariedEmployee.surname}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="E-mail">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{SalariedEmployee.e_mail}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true" value="#{SalariedEmployee.e_mail}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Telephone">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{SalariedEmployee.phone_number}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{SalariedEmployee.phone_number}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Montly Salary">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{SalariedEmployee.monthly_salary}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{SalariedEmployee.monthly_salary}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Actions" style="width:7rem">
						<div>
							<p:rowEditor style="float: left;" />
							<h:commandLink action="#{order.deleteAction(o)}"
								style="float:left; margin-left:1rem">
								<i class="glyphicon glyphicon-minus"></i>
							</h:commandLink>
						</div>
					</p:column>

				</p:dataTable>

			</h:form>
		</div>
	</div>

	<div class="container-fluid" id="sfondo2">
		<div class="container">
			<h:form id="commissioned_form_list">
				<p:growl id="commissioned_list_msgs" showDetail="true" />

				<p:dataTable id="commissionedEmployeeList"
					var="CommissionedEmployee" value="#{manager.com_employees}"
					editable="true" style="margin-bottom:20px">
					<f:facet name="header">
						COMMISSIONED EMPLOYEES
						<h:commandLink action="#{order.deleteAction(o)}"
							style="float:right;">
							<i class="glyphicon glyphicon-plus"></i>
						</h:commandLink>
					</f:facet>

					<p:ajax event="rowEdit" listener="#{manager.onCommissionedRowEdit}"
						update=":commissioned_form_list:commissioned_list_msgs" />
					<p:ajax event="rowEditCancel"
						update=":commissioned_form_list:commissioned_list_msgs, :commissioned_form_list:commissionedEmployeeList"
						listener="#{manager.onCommissionedRowCancel}"
						oncomplete="javascript:location.reload(true)" />

					<p:column headerText="Name">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{CommissionedEmployee.name}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText id="modelInput2" disabled="true"
									value="#{CommissionedEmployee.name}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Surname">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{CommissionedEmployee.surname}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{CommissionedEmployee.surname}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="E-mail">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{CommissionedEmployee.e_mail}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{CommissionedEmployee.e_mail}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Telephone">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{CommissionedEmployee.phone_number}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{CommissionedEmployee.phone_number}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Montly Salary">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{CommissionedEmployee.monthly_salary}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{CommissionedEmployee.monthly_salary}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Sales Rate">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{CommissionedEmployee.sale_rate}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{CommissionedEmployee.sale_rate}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Actions" style="width:7rem">
						<div>
							<p:rowEditor style="float: left;" />
							<h:commandLink action="#{order.deleteAction(o)}"
								style="float:left; margin-left:1rem">
								<i class="glyphicon glyphicon-minus"></i>
							</h:commandLink>
						</div>
					</p:column>

				</p:dataTable>
			</h:form>
		</div>
	</div>

	<div class="container-fluid" id="sfondo2">
		<div class="container">
			<h:form id="contractor_form_list">
				<p:growl id="contractor_list_msgs" showDetail="true" />

				<p:dataTable id="contractorEmployeeList" var="ContractorEmployee"
					value="#{manager.con_employees}" editable="true"
					style="margin-bottom:20px">
					<f:facet name="header">
						CONTRACTOR EMPLOYEES 
						<h:commandLink action="#{order.deleteAction(o)}"
							style="float:right;">
							<i class="glyphicon glyphicon-plus"></i>
						</h:commandLink>
					</f:facet>

					<p:ajax event="rowEdit" listener="#{manager.onContractorRowEdit}"
						update=":contractor_form_list:contractor_list_msgs" />
					<p:ajax event="rowEditCancel"
						update=":contractor_form_list:contractor_list_msgs, :contractor_form_list:contractorEmployeeList"
						listener="#{manager.onContractorRowCancel}"
						oncomplete="javascript:location.reload(true)" />

					<p:column headerText="Name">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{ContractorEmployee.name}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText id="modelInput2" disabled="true"
									value="#{ContractorEmployee.name}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Surname">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{ContractorEmployee.surname}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{ContractorEmployee.surname}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="E-mail">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{ContractorEmployee.e_mail}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{ContractorEmployee.e_mail}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Telephone">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{ContractorEmployee.phone_number}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText disabled="true"
									value="#{ContractorEmployee.phone_number}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Hourly Rate">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{ContractorEmployee.hourly_rate}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{ContractorEmployee.hourly_rate}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Actions" style="width:7rem">
						<div>
							<p:rowEditor style="float: left;" />
							<h:commandLink action="#{order.deleteAction(o)}"
								style="float:left; margin-left:1rem">
								<i class="glyphicon glyphicon-minus"></i>
							</h:commandLink>
						</div>
					</p:column>

				</p:dataTable>
			</h:form>
		</div>
	</div>

	<div class="container-fluid" id="sfondo">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<h:graphicImage library="images" name="unipv2.png"
						class="img-responsive center-block" alt="Responsive image"
						id="bordino2" />
				</div>
			</div>
		</div>
	</div>

</body>
</html>